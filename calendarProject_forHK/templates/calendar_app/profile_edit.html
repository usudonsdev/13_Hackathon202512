<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›† - Smart Scheduler</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* Colors */
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #6e7c87;
            --accent-color: #3b82f6;
            --accent-hover: #2563eb;
            --danger-color: #ef4444;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);

            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;

            /* Layout */
            --sidebar-width: 250px;
            --header-height: 60px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            height: 100%;
        }

        /* Sidebar Styles (æµç”¨) */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            padding: var(--spacing-md);
        }

        .logo-area h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            color: var(--text-primary);
        }

        .main-nav {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            color: var(--text-secondary);
            transition: all 0.2s;
            text-align: left;
            text-decoration: none;
        }

        .nav-btn:hover {
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ç”»é¢ãªã®ã§ã€Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã« */
        .nav-btn.active {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-weight: 500;
        }

        .settings-area {
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-color);
        }

        .icon-btn {
            border: none;
            background: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
        }

        .top-bar {
            height: var(--header-height);
            padding: 0 var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        /* Form Layout */
        .form-page-container {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-lg);
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .edit-form-card {
            background-color: var(--bg-secondary);
            padding: var(--spacing-lg);
            border-radius: 12px;
            width: 100%;
            max-width: 700px;
            box-shadow: var(--shadow-md);
            margin-top: var(--spacing-lg);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        input[type="text"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: var(--spacing-sm);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: inherit;
            font-size: 1rem;
            background-color: var(--bg-secondary); /* èƒŒæ™¯è‰²ã‚’ç™½ã«çµ±ä¸€ */
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        /* Profile Header Style */
        .profile-header {
            display: flex;
            align-items: center;
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: var(--spacing-lg);
        }

        .avatar-area {
            position: relative;
            margin-right: var(--spacing-lg);
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--text-secondary);
            overflow: hidden;
            border: 2px solid var(--accent-color); /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã§ç¸å–ã‚Š */
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 30px;
            height: 30px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.2s;
        }
        
        .upload-overlay:hover {
            background-color: var(--accent-hover);
        }

        .upload-overlay span {
            color: white;
            font-size: 0.8rem;
        }
        
        .upload-overlay input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        /* Save Button */
        .form-actions {
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-color);
            margin-top: var(--spacing-lg);
            display: flex;
            justify-content: flex-end;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            transition: background-color 0.2s;
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
        }

        .btn-secondary {
            background-color: var(--bg-primary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
            margin-right: var(--spacing-md);
        }
        
        /* Time Input Group (for Working Hours) */
        .time-group {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
        }
        
        .time-group select {
            flex: 1;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="logo-area">
                <h1>Scheduler</h1>
            </div>

            <nav class="main-nav">
                <a href="add_event.html" class="nav-btn">
                    <span class="icon">ğŸ“…</span> äºˆå®šè¿½åŠ 
                </a>
                <a href="#" class="nav-btn">
                    <span class="icon">ğŸ“</span> ä»Šæ—¥ã‚„ã‚‹ã“ã¨
                </a>
                <a href="#" class="nav-btn">
                    <span class="icon">ğŸ‘¥</span> ã¨ã‚‚ã ã¡
                </a>
                <a href="account.html" id="sidebar-account-btn" class="nav-btn active">
                    <span class="icon">ğŸ‘¤</span> ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
                </a>
                <a href="LLM_Assist_System.html" class="nav-btn">
                    <span class="icon">âœ¨</span> ã‚¢ã‚·ã‚¹ãƒˆ
                </a>
            </nav>

            <div class="settings-area">
                <button id="btn-settings" class="icon-btn" aria-label="Settings">âš™ï¸ è¨­å®š</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <h2 class="page-title">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†</h2>
            </header>

            <div class="form-page-container">
                <div class="edit-form-card">
                    
                    <form id="profile-edit-form">

                        <div class="profile-header">
                            <div class="avatar-area">
                                <div class="avatar" id="current-avatar">
                                    ğŸ‘¤
                                </div>
                                <div class="upload-overlay" onclick="document.getElementById('avatar-upload').click()">
                                    <span>+</span>
                                    <input type="file" id="avatar-upload" accept="image/*" class="hidden">
                                </div>
                            </div>
                            <div>
                                <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼åå¤ªéƒ</h3>
                                <p class="text-secondary">ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: @scheduler_taro</p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="display-name">è¡¨ç¤ºå <span style="color:var(--danger-color);">*</span></label>
                            <input type="text" id="display-name" value="ãƒ¦ãƒ¼ã‚¶ãƒ¼åå¤ªéƒ" required
                                placeholder="ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚‹åå‰">
                        </div>

                        <div class="form-group">
                            <label for="user-id">ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</label>
                            <input type="text" id="user-id" value="@scheduler_taro" readonly
                                style="background-color: var(--bg-primary); color: var(--text-secondary);"
                                placeholder="å¤‰æ›´ä¸å¯">
                            <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                                ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯ã‚·ã‚¹ãƒ†ãƒ ä¸Šã€å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                            <input type="email" id="email" value="user.taro@example.com"
                                placeholder="é€£çµ¡ç”¨ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹">
                        </div>
                        
                        <div class="form-group">
                            <label for="bio">è‡ªå·±ç´¹ä»‹</label>
                            <textarea id="bio" placeholder="ã‚ãªãŸã®ä»•äº‹ã€è¶£å‘³ã€ãƒãƒ¼ãƒ ã§ã®å½¹å‰²ãªã©ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã¨ã‚¿ã‚¹ã‚¯å‡¦ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã®AIã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºã«æºã‚ã£ã¦ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ’ãƒ¼ã¨åŠ¹ç‡åŒ–ãŒå¥½ãã§ã™ã€‚</textarea>
                        </div>

                        <div class="form-group">
                            <label>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹¤å‹™æ™‚é–“ (LLM Assistã®æ¨å¥¨æ™‚é–“)</label>
                            <div class="time-group">
                                <select id="default-start-time" value="09:00"></select>
                                <span class="separator">ã€œ</span>
                                <select id="default-end-time" value="18:00"></select>
                            </div>
                            <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                                ã“ã“ã§è¨­å®šã—ãŸæ™‚é–“ãŒã€AIãŒäºˆå®šã‚’ææ¡ˆã™ã‚‹éš›ã®åŸºæº–ã«ãªã‚Šã¾ã™ã€‚</p>
                        </div>

                        <div class="form-actions">
                            <a href="account.html" class="btn-secondary">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
                            <button type="submit" class="btn-primary">å¤‰æ›´ã‚’ä¿å­˜</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸå€¤è¨­å®š ---
            const initialStartTime = '09:00';
            const initialEndTime = '18:00';

            /**
             * æŒ‡å®šã•ã‚ŒãŸã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã«ã€00:00ã‹ã‚‰23:50ã¾ã§ã®10åˆ†åˆ»ã¿ã®æ™‚é–“ã‚’ç”Ÿæˆã—ã¦è¿½åŠ ã—ã¾ã™ã€‚
             * @param {string} elementId - ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ID
             * @param {string} defaultValue - åˆæœŸé¸æŠã™ã‚‹æ™‚åˆ» (ä¾‹: '09:00')
             */
            function populateTimeSelect(elementId, defaultValue) {
                const selectElement = document.getElementById(elementId);
                if (!selectElement) return;

                selectElement.innerHTML = ''; // æ—¢å­˜ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢

                for (let h = 0; h < 24; h++) {
                    for (let m = 0; m < 60; m += 10) {
                        // æ™‚é–“ã¨åˆ†ã‚’2æ¡è¡¨ç¤ºã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
                        const hour = String(h).padStart(2, '0');
                        const minute = String(m).padStart(2, '0');
                        const timeValue = `${hour}:${minute}`;

                        const option = document.createElement('option');
                        option.value = timeValue;
                        option.textContent = timeValue;
                        
                        // åˆæœŸå€¤ã‚’é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
                        if (timeValue === defaultValue) {
                            option.selected = true;
                        }

                        selectElement.appendChild(option);
                    }
                }
            }
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹¤å‹™æ™‚é–“ã®ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆ
            populateTimeSelect('default-start-time', initialStartTime);
            populateTimeSelect('default-end-time', initialEndTime);


            // --- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ ---
            const avatarUpload = document.getElementById('avatar-upload');
            const currentAvatar = document.getElementById('current-avatar');

            if (avatarUpload && currentAvatar) {
                avatarUpload.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            // æ–°ã—ã„ç”»åƒè¦ç´ ã‚’ä½œæˆã—ã€æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç½®ãæ›ãˆã‚‹
                            currentAvatar.innerHTML = `<img src="${e.target.result}" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ">`;
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // --- ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰ ---
            const profileForm = document.getElementById('profile-edit-form');
            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    // å®Ÿéš›ã«ã¯ã“ã“ã§APIã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                    alert(`ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼\nè¡¨ç¤ºå: ${document.getElementById('display-name').value}\nè‡ªå·±ç´¹ä»‹: ${document.getElementById('bio').value.substring(0, 20)}...`);
                    // ä¿å­˜å¾Œã« account.html ã«é·ç§»ãªã©
                    // window.location.href = 'account.html';
                });
            }
        });
    </script>
</body>

</html>
